<apex:page standardController="litify_pm__Insurance__c" recordSetVar="records"   extensions="CloneSelectedRecordsToCompanions" lightningStylesheets="true">
    <apex:form id="mainform" >
        <apex:pagemessages id="theMessages"/>
        <apex:pageBlock title="Clone to Companions">
            <apex:pageMessage summary="No selected records." severity="warning" strength="3" rendered="{!l_companions = null}"/>
            <apex:pageMessage summary="No related companions." severity="warning" strength="3" rendered="{!l_companions.size = 0}"/>
            <apex:pageBlockSection title="Related Companions" rendered="{!l_companions != null && l_companions.size > 0}">
                <apex:selectCheckboxes value="{!l_selected}">
                    <apex:selectOptions value="{!l_companions}"/>
                </apex:selectCheckboxes>
            </apex:pageBlockSection>
            <apex:pageBlockButtons location="bottom" >
                <apex:commandButton value="Clone To Companions" action="{! cloneRecords}" status="processingImg" rerender="mainform"  rendered="{!l_companions != null && l_companions.size > 0}"/> &nbsp;
                <apex:commandButton value="Cancel" action="{!cancel}"  status="processingImg" rerender="mainform"/>
            </apex:pageBlockButtons>
        </apex:pageBlock>
        <apex:actionstatus id="processingImg" starttext="Loading...">
            <apex:facet name="start">
                <div id="salesforceSource_blurybackground" style="z-index: 100;position:fixed; left:0; top:0; bottom:0; right:0;background-color: #dcdcdc; opacity:0.6;filter:alpha(opacity=60)"></div>
                <div id="FormAction_loading" class="waitingSearchDiv" style="width: 100%; height: 80%; display: ''; ">
                    <div style="width: 50%;vertical-align: middle;" class="waitingHolder">
                        <table align="center" valign="top" style="width: 100%; height: 30%">
                            <tr align="center" valign="top" style="width: 100%; height: 30%">
                                <td valign="top">
                                    <img class="waitingImage" src="/img/loading.gif" />
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
                <div id="FormAction_loading" class="waitingSearchDiv" style="width: 100%; height: 100%; display: ''; " />
                <script>
                document.getElementById('FormAction_loading').height = window.innerHeight * (3/4);
                </script>
            </apex:facet>
            <apex:facet name="stop" />
        </apex:actionstatus>
    </apex:form>
</apex:page>